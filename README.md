# Веб-сервис для викторины

_Это веб-сервис, реализованный на Python 3 с использованием FastAPI и PostgreSQL, который предоставляет API для 
получения случайных вопросов для викторины из публичного API [jService](https://jservice.io/api/random?count=1). 
Сервис сохраняет полученные вопросы в базе данных и предоставляет возможность получить предыдущие сохраненные вопросы 
для викторины._

**_Данный сервис развернут на сервере по адресу: [Документация BewiseProject](http://5.104.108.168:8007/docs/)_**

## Установка

Перед началом установки убедитесь, что у вас установлен Python 3.11 и Poetry (пакетный менеджер для Python). 

1. Склонируйте репозиторий:

`git clone https://github.com/192117/BewiseProject.git`

2. Перейдите в директорию:

`cd BewiseProject`

## Запуск приложения без Docker Compose (после пункта "Установка")

1. Установите зависимости с помощью Poetry:

`poetry install`

2. Создайте переменные окружения:

_Создайте файл .env на основе .env.example для запуска без Docker и файл .env.docker на основе .env.docker.example для 
запуска с Docker. Оба файла содержат переменные окружения, которые требуются для настройки приложения._

3. Запустите приложеие с помощью Poetry:

`poetry run uvicorn app:app --host 127.0.0.1 --port 8000`

4. Доступ к приложению: 

[Документация FastAPI](http://127.0.0.1:8000/docs)

## Запуск приложения c использованием Docker Compose (после пункта "Установка")

1. Создайте переменные окружения:

_Создайте файл .env на основе .env.example для запуска без Docker и файл .env.docker на основе .env.docker.example для 
запуска с Docker. Оба файла содержат переменные окружения, которые требуются для настройки приложения._

3. Запустите сборку docker-compose:

`docker compose up -d --build`

4. Доступ к приложению: 

[Документация FastAPI](http://127.0.0.1:8000/docs)

## Примеры запроса к BewiseProject API

### Создание новой викторины

Отправьте POST запрос на http://localhost:8000/quiz/ с телом запроса в формате JSON следующего вида:

```
{
  "questions_num": 2
}
```

или 

```
{
  "questions_num": "2"
}
```

В случае прохождения валиадции данных получите вопросы из предыдущей викторины (если такой не было, то получите пустой 
список) и **статус код 200**.

_Пример ответа:_

```
{
  "id_quiz": 0,
  "questions": [
    {
      "id_question": 0,
      "question": "string",
      "answer": "string",
      "date_created": "2023-05-18T08:48:08.698Z"
    }
  ]
}
```

или

```
{
  "questions": []
}
```

В случае неудачной валидации получите **статус код 422** и сообщение с такой структурой:

```
{
  "error": "string"
}
```

